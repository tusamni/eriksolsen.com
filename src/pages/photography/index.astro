---
import Layout from "@/layouts/BaseLayout";

import { getCollection } from "astro:content";
import { cosmic } from "@/library/cosmic";
import Container from "@/components/content/Container";
import Heading from "@/components/content/Heading";
import Featured from "@/components/shoots/cards/Featured";
import Section from "@/components/content/Section";

const testimonials = await getCollection("testimonial", ({ data }) => {
	return data.name == "Frank B";
});
const featured = await getCollection("shoot", ({ data }) => {
	return data.shoot.featured;
});

const { object: page } = await cosmic.objects
	.findOne({
		type: "page-photography",
		slug: "page-photography",
	})
	.props("metadata");
---

<Layout title={page.metadata.seo.title} description={page.metadata.seo.description}>
	<Section>
		<Container>
			<Heading>
				<h1 slot="heading">{page.metadata.content.heading}</h1>
				<div slot="description" set:html={page.metadata.content.description} />
			</Heading>
		</Container>

		<Container>
			<h2 class="font-semibold! mb-12">Recent Work</h2>
			<div class="grid grid-cols-3 gap-6">
				{featured.slice(0, 3).map((f, i) => <Featured shoot={f} sizes="800px" lazy={i === 0 ? false : true} />)}
			</div>
		</Container>
	</Section>
</Layout>
