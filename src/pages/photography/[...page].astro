---
// layout
import BaseLayout from "@/layouts/BaseLayout";

// components
import Heading from "@/components/Heading";
import Container from "@/components/Container";
import ShootSnippet from "@/components/SnippetShoot";
import Pagination from "@/components/Pagination";

// config
import { photoSize } from "@/src/config";

export async function getStaticPaths({ paginate }) {
    const allShoots = await Astro.glob("./*.mdx");
    const filteredShoots = allShoots.sort((a, b) => new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf());

    return paginate(filteredShoots, { pageSize: photoSize });
}

const { page } = Astro.props;
---

<BaseLayout
    title="Car Photography in Austin, TX"
    description="During the summer months you'll catch me shootin photos at Cars and Coffee at COTA or Coffee With Cars in Dripping Springs. I also do freelance photography for Bring a Trailer auctions."
>
    <Container>
        <Heading>
            <h1>Photos</h1>
            {
                !page.url.prev && (
                    <p>
                        Lately, I've been shooting lots of cars for Bring a Trailer auctions. If you're in the Austin area and are interested in
                        having your car photographed for an online auction site,{" "}
                        <a href="/contact" title="Contact Me">
                            let's chat!
                        </a>
                    </p>
                )
            }
        </Heading>
    </Container>

    <Container>
        <section class="grid grid-cols-3">
            {page.data.map((s) => <ShootSnippet shoot={s} />)}
        </section>
    </Container>

    <Container>
        <Pagination page={page} />
    </Container>
</BaseLayout>
