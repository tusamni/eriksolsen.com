---
// layout
import Layout from "@/layouts/BaseLayout";

// components
import Container from "@/components/content/Container";
import Image from "@/components/image/Image";
import Split from "@/components/content/Split";

// content
import { CollectionEntry, getEntryBySlug, getCollection } from "astro:content";
type Props = CollectionEntry<"images">;

// functions
import { formatDate } from "@/functions/DateTime";

export async function getStaticPaths() {
    const filename = await getCollection("images");

    const paths = [];
    filename.map((f) => {
        let path = f.slug;
        paths.push(path);
    });

    return paths.map((p) => ({
        params: { file: p },
    }));
}

const params = Astro.params;
const image = await getEntryBySlug("images", params.file);
---

<Layout>
    <Container>
        <h1 class="text-center">
            {image.data.title}
        </h1>
    </Container>

    <Container large={true}>
        <Image
            src={image.slug}
            metadata={false}
            figureClass="w-full mx-auto"
            class="mx-auto"
        />
    </Container>

    <Container padBottom={true}>
        <Split>
            <h2 slot="heading">Metadata</h2>
            <div slot="bottom">
                <div class="button button-ghost text-lg">Download Image</div>
            </div>

            <div class="space-y-12">
                <div class="text-4xl font-semibold tracking-tight">
                    {image.data.description}
                </div>

                <div class="text-xl">
                    <div class="space-y-3">
                        <div>
                            Taken on {formatDate(image.data.date)}
                        </div>
                        <div>
                            Shot using a
                            {image.data.cameraMake}
                            {image.data.cameraModel}
                        </div>
                        <div>
                            With a
                            {image.data.lens}
                        </div>
                    </div>
                </div>

                <div class="flex gap-6 text-xl tracking-tight">
                    <div>{image.data.settingsFocalLength}</div>
                    <div>{image.data.settingsfStop}</div>
                    <div>{image.data.settingsISO}</div>
                    <div>{image.data.settingsShutter}</div>
                </div>
            </div>
        </Split>
    </Container>
</Layout>

<Container padBottom={true} />
