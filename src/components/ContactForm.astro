---
import { siteConfig } from "@/config";

// props
export interface Props {
    darkTheme?: boolean;
    showPhone?: boolean;
}
const { darkTheme = false, showPhone = true } = Astro.props;
---

<form class="grid grid-cols-2 gap-4 lg:gap-6 lg:gap-y-8" action="/contact/success/" id="contact-form" name="Contact - Page" method="POST" data-netlify="true" netlify-honeypot="zip">
    <div class="space-y-1 sm:space-y-2 col-span-2">
        <label for="name" class:list={[darkTheme && `text-neutral-300`]}>Name</label>
        <input type="text" autocomplete="name" name="name" id="name" required oninput="updateSubject(this.value)" />
    </div>

    <div class="space-y-1 sm:space-y-2">
        <label for="email" class:list={[darkTheme && `text-neutral-300`]}>E-mail</label>
        <input type="email" autocomplete="email" name="email" id="email" required />
    </div>

    <div class="space-y-1 sm:space-y-2">
        <label for="phone" class:list={[darkTheme && `text-neutral-300`]}>Phone</label>
        <input type="tel" name="phone" id="phone" aria-describedby="phone-optional" autocomplete="tel" required />
    </div>

    <div class="hidden col-span-2">
        <label for="Zip Code" class:list={[darkTheme && `text-neutral-300`]}>Zip Code</label>
        <input name="zip" id="zip" />
    </div>

    <div class="space-y-1 sm:space-y-2 col-span-2">
        <label for="message" class:list={[darkTheme && `text-neutral-300`]}>How can I help you?</label>
        <textarea id="message" name="message" aria-describedby="message-optional"></textarea>
    </div>

    <!-- pathname -->
    <input name="url" id="url" type="hidden" value={Astro.url.pathname} />

    <div class="col-span-2 flex flex-col gap-y-6 md:flex-row md:justify-between md:items-center">
        <button class:list={[darkTheme && `button-inverse text-xl`, `button-primary button text-base`]}>Let's Talk</button>

        {
            showPhone && (
                <div class:list={[`text-base md:text-right text-center`, darkTheme ? `text-neutral-300` : `text-neutral-700`]}>
                    I'm also available for a <br />
                    call or text at{" "}
                    <a href={`tel:${siteConfig.phone.base}`} class="underline">
                        {siteConfig.phone.formatted}
                    </a>
                    .
                </div>
            )
        }
    </div>

    <input id="output-email-subject" type="hidden" name="subject" value="" />
</form>

<script is:inline>
    function updateSubject(valEmail) {
        document.getElementById("output-email-subject").value = `New Submission from eriksolsen.com - ${valEmail}`;
    }
</script>
