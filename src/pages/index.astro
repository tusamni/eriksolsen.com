---
// layout
import PageLayout from "@/layouts/PageLayout";

// components
import Button from "@/components/Button";
import Container from "@/components/Container";
import Caption from "@/components/image/Caption";
import Link from "@/components/Link";
import RecentPost from "@/components/RecentPost";
import RecentShoot from "@/components/RecentShoot";
import { Image, Picture } from "@astrojs/image/components";

// functions
import { getRemoteImage, getImage } from "@/functions/Media";

// images
const headers = [
    await getRemoteImage("/shoots/2020/2020-02-27-lit-show-day-one/lit-show-2020_017.jpeg"),
    await getRemoteImage("/shoots/2020/2020-02-27-lit-show-day-one/lit-show-2020_016.jpeg"),
    await getRemoteImage("/shoots/2020/2020-02-27-lit-show-day-one/lit-show-2020_010.jpeg"),
    await getRemoteImage("/shoots/2020/2020-02-27-lit-show-day-one/lit-show-2020_014.jpeg"),
    await getRemoteImage("/shoots/2020/2020-02-27-lit-show-day-one/lit-show-2020_013.jpeg"),
    await getRemoteImage("/shoots/2020/2020-02-27-lit-show-day-one/lit-show-2020_011.jpeg"),
];
const testImg = await getImage("/shoots/2020/2020-02-27-lit-show-day-one/lit-show-2020_01.jpeg");
console.log(testImg);

const unsortedPosts = await Astro.glob("../pages/blog/*.mdx");
const posts = unsortedPosts
    .sort(function (a, b) {
        return new Date(b.date).valueOf() - new Date(a.date).valueOf();
    })
    .slice(0, 3);

const unsortedShoots = await Astro.glob("../pages/photography/*.mdx");
const shoots = unsortedShoots
    .sort(function (a, b) {
        return new Date(b.date).valueOf() - new Date(a.date).valueOf();
    })
    .slice(0, 4);
---

<PageLayout>
    <div class="space-y-20 sm:space-y-40">
        <div class="relative h-[600px]">
            <div class="absolute grid grid-cols-6 h-full w-full">
                {headers.map((h) => <Image src={h.url} aspectRatio={h.aspectRatio} width={1000} class="h-full w-full object-cover" alt={h.title} />)}
            </div>
        </div>

        <Container classes="space-y-20">
            <div class="flex flex-col sm:flex-row gap-8 justify-between">
                <h1 class="font-black text-5xl tracking-tight sm:w-1/3">It's different working with me.</h1>

                <div class="text-xl font-light leading-relaxed tracking-wide sm:w-2/4 space-y-8">
                    <p>
                        Lately, I've been shooting lots of cars for Bring a Trailer auctions. If you're in the Austin area and are interested in
                        having your car photographed for an online auction site, let's chat!
                    </p>
                    <p>
                        Lately, I've been shooting lots of cars for Bring a Trailer auctions. If you're in the Austin area and are interested in
                        having your car photographed for an online auction site, let's chat!
                    </p>

                    <div class="flex flex-col md:flex-row gap-3 md:gap-10">
                        <Link text="Hire Me!" url="/contact" />
                        <Link text="See More Photos" url="/photography" />
                    </div>
                </div>
            </div>

            <div class="grid sm:grid-cols-2 gap-10 lg:gap-20">
                {shoots.map((p) => <RecentShoot shoot={p} />)}
            </div>

            <div class="flex justify-center">
                <Button text="More Shoots" url="/photography" backgroundColor="bg-black" textColor="text-white" />
            </div>
        </Container>

        <div class="bg-stone-100 py-40">
            <Container classes="space-y-40">
                <div class="flex gap-16 justify-between">
                    <div class="text-xl font-light tracking-wide sm:w-2/4 space-y-8">
                        <h2 class="font-black text-5xl tracking-tight sm:w-1/3">Digital Marketing</h2>
                        <p class="text-xl leading-8">
                            Lately, I've been shooting lots of cars for Bring a Trailer auctions. If you're in the Austin area and are interested in
                            having your car photographed for an online auction site, let's chat!
                        </p>
                    </div>

                    <ul class="text-2xl font-semibold space-y-5">
                        <li><span class="font-light">&check;</span> Search Engine Marketing</li>
                        <li><span class="font-light">&check;</span> Email Marketing</li>
                        <li><span class="font-light">&check;</span> Data Analytics</li>
                        <li><span class="font-light">&check;</span> Conversion Rate Optimization</li>
                        <li><span class="font-light">&check;</span> Programming</li>
                    </ul>
                </div>

                <div class="grid sm:grid-cols-1 gap-20 lg:grid-cols-3">
                    {posts.map((p) => <RecentPost post={p} />)}
                </div>

                <div class="flex justify-center">
                    <Button text="More Posts" url="/blog" backgroundColor="bg-black" textColor="text-white" />
                </div>
            </Container>
        </div>
    </div>
</PageLayout>
