---
import { siteConfig } from "@/src/config";
import Container from "@/components/content/Container";
import Logo from "@/components/Logo";

// props
export interface Props {
	border?: boolean;
}
const { border = true } = Astro.props;

export const Links = [
	{
		display: "Car Photography",
		url: "/photography/",
		links: [
			{
				display: "FAQ",
				description: {
					short: "Commonly asked car photography questions.",
				},
				url: "/photography/faq/",
			},
			{
				display: "Car Auction Shot List",
				description: {
					short: "A list of the common car auction shots required.",
				},
				url: "/photography/shot-list/",
			},
		]
	},
	{
		display: "Pricing",
		description: {
			short: "Details for car photography pricing.",
		},
		url: "/photography/pricing/",
	},
	{
		display: "Shoots",
		description: {
			short: "Browse my recent automotive shoots.",
		},
		url: "/photography/shoots/",
	},
	{
		display: "More",
		description: {
			short: "",
		},
		url: "#",
		links: [
			{
				display: "Blog",
				description: {
					short: "Sometimes I write about photography and technology.",
				},
				url: "/blog/",
			},
		],
	},
];
---

<Container>
	<header x-data="{ open: false }" id="navigation" class:list={[border && "border-b border-slate-700/10"]}>
		<div class:list={["flex flex-col py-8 sm:py-10 md:items-center md:justify-between md:flex-row"]}>
			<div class="flex md:hidden lg:flex flex-row items-center justify-between text-slate-900 text-sm">
				<a href="/" title="Erik Olsen Photography">
					<Logo class="h-10 sm:h-12 w-auto text-slate-800" />
				</a>

				<div class="flex items-center justify-center gap-3 md:hidden">
					<a href="/contact/" class="button button-primary">Contact Me</a>
					<button @click="open = !open" class="button button-ghost inline-flex items-center justify-center" aria-label="Mobile Navigation">
						<svg class="w-5 h-5" stroke="currentColor" fill="none" viewBox="0 0 24 24">
							<path :class="{'hidden': open, 'inline-flex': !open }" class="inline-flex" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"> </path>
							<path :class="{'hidden': !open, 'inline-flex': open }" class="hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
						</svg>
					</button>
				</div>
			</div>

			<nav >
				<ul
					:class="{'flex border-t border-slate-900/10 pt-8': open, 'hidden': !open}"	
					class:list={["text-base md:text-lg text-slate-900 font-medium", "mt-8 md:mt-0 flex-col hidden md:pb-0 md:flex md:flex-row lg:space-x-6 md:space-x-5 space-y-2 md:space-y-0"]}
				>
					{
						Links.map((l) => (
						<li class:list={[l.hasOwnProperty("links") && "md:flex md:flex-row md:items-center gap-1 relative"]} x-data="{ flyout: false }" x-on:mouseenter="flyout = true" x-on:mouseleave="flyout = false">
							<a class="text-lg hover:text-slate-900/70" href={l.url}>{l.display}</a>
							{l.hasOwnProperty("links") && (
								<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="hidden md:block size-4">
									<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
								</svg>

								<div class="origin-top-right hidden md:block absolute top-full min-w-[240px] w-[280px] pt-3 z-10" x-cloak>
									<ul
										class="bg-slate-50 border-0 text-slate-800 rounded-lg shadow-2xl *:border-b *:last:border-b-0 *:border-slate-700/10"
										x-show="flyout"
										x-transition:enter="transition ease-out duration-200 transform"
										x-transition:enter-start="opacity-0 -translate-y-2"
										x-transition:enter-end="opacity-100 translate-y-0"
										x-transition:leave="transition ease-out duration-200"
										x-transition:leave-start="opacity-100"
										x-transition:leave-end="opacity-0"
									>
										{l.links.map((link) => (
											<li class="relative text-base font-medium p-4 hover:bg-white hover:first:rounded-t-lg hover:last:rounded-b-lg">
												<a href={link.url}>
													{link.display}
													<span class="absolute inset-0" />
												</a>
												<div class="text-sm text-slate-600 font-normal mt-1">{link.description.short}</div>
											</li>
										))}
									</ul>
								</div>

								<ul class="md:hidden mt-1 ml-3 space-y-1">
									{l.links.map((link) => (
										<li class="relative text-base font-normal">
											<a href={link.url}>
												&ndash; {link.display}
												<span class="absolute inset-0" />
											</a>
										</li>
									))}
								</ul>
							)}
						</li>
						))
					}
				</ul>

				<!-- {
					Links.map((l) => (
						<ul
							class:list={["text-base md:text-lg text-slate-900 font-medium hover:text-slate-900/70", l.hasOwnProperty("links") && "flex flex-row items-center gap-1 relative"]}
							x-data="{ flyout: false }"
							@mouseenter="flyout = true"
							@mouseleave="flyout = false"
						>
							<li class="flex items-center gap-x-1">
								<a href={l.url}>{l.display}</a>
								{l.hasOwnProperty("links") && (
									<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
										<path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
									</svg>

									<div class="origin-top-right absolute top-full min-w-[240px] pt-1" x-cloak>
										<ul
											class="bg-slate-50 border-0 text-slate-800 rounded-lg shadow-2xl *:border-b *:last:border-b-0 *:border-slate-700/10"
											x-show="flyout"
											x-transition:enter="transition ease-out duration-200 transform"
											x-transition:enter-start="opacity-0 -translate-y-2"
											x-transition:enter-end="opacity-100 translate-y-0"
											x-transition:leave="transition ease-out duration-200"
											x-transition:leave-start="opacity-100"
											x-transition:leave-end="opacity-0"
										>
											{l.links.map((link) => (
												<li class="relative text-base font-medium p-4 hover:bg-slate-200 hover:first:rounded-t-lg hover:last:rounded-b-lg">
													<a href={link.url}>
														{link.display}
														<span class="absolute inset-0" />
													</a>
													<div class="text-sm text-slate-600 font-normal mt-1">{link.description.short}</div>
												</li>
											))}
										</ul>
									</div>
								)}
							</li>
						</ul>
					))
				} -->

				<div x-show="open" x-transition x-cloak class="flex flex-col sm:flex-row gap-2 pt-8">
					<a href="/contact/" class="button button-primary shadow-lg">Email Me</a>
					<a href={`tel:${siteConfig.phone.base}`} class="button button-ghost shadow-lg">
						{siteConfig.phone.formatted}
					</a>
				</div>
			</nav>

			<div class="hidden md:inline-flex items-center gap-2 list-none">
				<a href={`tel:${siteConfig.phone.base}`} class="button button-ghost shadow-lg">
					{siteConfig.phone.formatted}
				</a>
				<a href="/contact/" class="button button-primary shadow-lg">Contact Me</a>
			</div>
		</div>
	</header>
</Container>
